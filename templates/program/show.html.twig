{% extends "base.html.twig" %}

{% block title %}
{{ program.title }}
{% endblock %}

{% block body %}
<div class="container">
    <div class="card" style="width: 45rem">
        <img class="card-img-top" src="{{program.poster}}" alt="Card image cap">
        <div class="card-body">
        <h5 class="card-title">{{ program.title }} [id: {{ program.id }}] </h5>
        {% if app.user %}
        <a id="watchlist" href="{{ path('program_watchlist', {id: program.id})}}">
            <i class="bi {{ app.user.isInWatchlist(program) ? 'bi-heart-fill' : 'bi-heart' }}"></i>
        </a>
        {% else %}
        <a href="{{ path('login')}}">
            <i class="bi bi-heart"></i>
            <p>Connecte-toi pour ajouter la série en favoris</p>
        </a>
        {% endif %}
        <p class="card-text">{{ program.synopsis }}</p>
        </div>
        <ul class="list-group list-group-flush">
            {% for season in seasons %}
            <li class="list-group-item">
                <h6>Season {{ season.number }}:</h6>
                <p>{{ season.description }}</p>
            </li>
            {% endfor %}
        </ul>
        <h5>Acteurs :</h5>
        {% for actor in program.actors %}
            <h5>{{ actor.firstName }} {{ actor.lastName }}</h5>
        {% else %}
            <h5>Aucun acteur pour cette série</h5>
        {% endfor %}
        {% if is_granted("ROLE_ADMIN") %}
            <a href="{{ path('program_edit', { 'slug': program.slug} ) }}">Éditer</a>
        {% endif %}
        {% if is_granted("ROLE_ADMIN")  %}
            {{ include('program/_delete_form.html.twig') }}
        {% endif %}
    </div>
</div>
    <a href="{{ path('program_index') }}">
        Retour à la liste des programmes
    </a>
{% endblock %}
